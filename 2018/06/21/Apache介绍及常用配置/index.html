<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Apache,">










<meta name="description" content="一、Apache介绍Apache是世界使用排名第一的Web服务器软件。它可以运行在几乎所有广泛使用的计算机平台上， 由于其跨平台和安全性被广泛使用，是最流行的Web服务器端软件之一。 它快速、可靠并且可通过简单的API扩充，将Perl/Python等解释器编译到服务器中。 官方网站：http://httpd.apache.org/ 发展历史：20世纪90年代初，国家超级计算机应用中心NCSA开发">
<meta name="keywords" content="Apache">
<meta property="og:type" content="article">
<meta property="og:title" content="Apache介绍及常用配置">
<meta property="og:url" content="http://yoursite.com/2018/06/21/Apache介绍及常用配置/index.html">
<meta property="og:site_name" content="吕培新的博客">
<meta property="og:description" content="一、Apache介绍Apache是世界使用排名第一的Web服务器软件。它可以运行在几乎所有广泛使用的计算机平台上， 由于其跨平台和安全性被广泛使用，是最流行的Web服务器端软件之一。 它快速、可靠并且可通过简单的API扩充，将Perl/Python等解释器编译到服务器中。 官方网站：http://httpd.apache.org/ 发展历史：20世纪90年代初，国家超级计算机应用中心NCSA开发">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://yoursite.com/2018/06/21/Apache介绍及常用配置/3-29.png">
<meta property="og:image" content="http://yoursite.com/2018/06/21/Apache介绍及常用配置/3-30.png">
<meta property="og:image" content="http://yoursite.com/2018/06/21/Apache介绍及常用配置/1-29.png">
<meta property="og:image" content="http://yoursite.com/2018/06/21/Apache介绍及常用配置/4-24.png">
<meta property="og:image" content="http://yoursite.com/2018/06/21/Apache介绍及常用配置/%E5%8E%8B%E7%BC%A9%E6%9F%A5%E8%AF%A2.png">
<meta property="og:image" content="http://yoursite.com/2018/06/21/Apache介绍及常用配置/1-30.png">
<meta property="og:image" content="http://yoursite.com/2018/06/21/Apache介绍及常用配置/2-32.png">
<meta property="og:image" content="http://www.178linux.com/wp-content/uploads/2018/06/1-31.png">
<meta property="og:image" content="http://yoursite.com/2018/06/21/Apache介绍及常用配置/2-33.png">
<meta property="og:image" content="http://yoursite.com/2018/06/21/Apache介绍及常用配置/3-31.png">
<meta property="og:image" content="http://yoursite.com/2018/06/21/Apache介绍及常用配置/4-25.png">
<meta property="og:image" content="http://yoursite.com/2018/06/21/Apache介绍及常用配置/1-32.png">
<meta property="og:image" content="http://yoursite.com/2018/06/21/Apache介绍及常用配置/2-34.png">
<meta property="og:image" content="http://yoursite.com/2018/06/21/Apache介绍及常用配置/3-32.png">
<meta property="og:image" content="http://yoursite.com/2018/06/21/Apache介绍及常用配置/1-33.png">
<meta property="og:image" content="http://yoursite.com/2018/06/21/Apache介绍及常用配置/2-35.png">
<meta property="og:image" content="http://yoursite.com/2018/06/21/Apache介绍及常用配置/3-33.png">
<meta property="og:updated_time" content="2018-07-17T13:02:15.332Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Apache介绍及常用配置">
<meta name="twitter:description" content="一、Apache介绍Apache是世界使用排名第一的Web服务器软件。它可以运行在几乎所有广泛使用的计算机平台上， 由于其跨平台和安全性被广泛使用，是最流行的Web服务器端软件之一。 它快速、可靠并且可通过简单的API扩充，将Perl/Python等解释器编译到服务器中。 官方网站：http://httpd.apache.org/ 发展历史：20世纪90年代初，国家超级计算机应用中心NCSA开发">
<meta name="twitter:image" content="http://yoursite.com/2018/06/21/Apache介绍及常用配置/3-29.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2018/06/21/Apache介绍及常用配置/">





  <title>Apache介绍及常用配置 | 吕培新的博客</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">吕培新的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">生活中没有弱者，只有不愿努力的人。</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-computer">
          <a href="/categories/计算机基础" rel="section">
            
            计算机基础
          </a>
        </li>
      
        
        <li class="menu-item menu-item-network">
          <a href="/categories/网络技术" rel="section">
            
            网络技术
          </a>
        </li>
      
        
        <li class="menu-item menu-item-linux">
          <a href="/categories/linux" rel="section">
            
            Linux运维
          </a>
        </li>
      
        
        <li class="menu-item menu-item-shell">
          <a href="/categories/shell脚本" rel="section">
            
            Shell脚本
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sql">
          <a href="/categories/数据库" rel="section">
            
            数据库
          </a>
        </li>
      
        
        <li class="menu-item menu-item-webserver">
          <a href="/categories/Web服务器" rel="section">
            
            Web服务器
          </a>
        </li>
      
        
        <li class="menu-item menu-item-automated">
          <a href="/categories/自动化运维" rel="section">
            
            自动化运维工具
          </a>
        </li>
      
        
        <li class="menu-item menu-item-cluster">
          <a href="/categories/集群" rel="section">
            
            集群
          </a>
        </li>
      
        
        <li class="menu-item menu-item-test">
          <a href="/categories/文本三剑客" rel="section">
            
            文本三剑客
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/06/21/Apache介绍及常用配置/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="吕培新">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="吕培新的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Apache介绍及常用配置</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-06-21T17:09:23+08:00">
                2018-06-21
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Web服务器/" itemprop="url" rel="index">
                    <span itemprop="name">Web服务器</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="一、Apache介绍"><a href="#一、Apache介绍" class="headerlink" title="一、Apache介绍"></a><strong>一、Apache介绍</strong></h2><p><strong>Apache</strong>是世界使用排名第一的Web服务器软件。它可以运行在几乎所有广泛使用的计算机平台上，</p>
<p>由于其跨平台和安全性被广泛使用，是最流行的Web服务器端软件之一。</p>
<p>它快速、可靠并且可通过简单的API扩充，将Perl/Python等解释器编译到服务器中。</p>
<p>官方网站：<a href="http://httpd.apache.org/" target="_blank" rel="noopener">http://httpd.apache.org/</a></p>
<h3 id="发展历史："><a href="#发展历史：" class="headerlink" title="发展历史："></a><strong>发展历史：</strong></h3><p>20世纪90年代初，国家超级计算机应用中心NCSA开发</p>
<p>1995年开源社区发布apache（a patchy server）</p>
<p><strong>ASF:</strong> apache software foundation</p>
<p><strong>FSF：</strong>Free Software Foundation</p>
<h3 id="特性："><a href="#特性：" class="headerlink" title="特性："></a><strong>特性：</strong></h3><ol>
<li>高度模块化：core+modules</li>
<li>动态加/卸载：DSO(Dynamic Shared Object)</li>
<li>多路处理模块：MPM(multi-processing module)</li>
</ol>
<h3 id="功能特性："><a href="#功能特性：" class="headerlink" title="功能特性："></a><strong>功能特性：</strong></h3><ul>
<li><p><strong>虚拟主机:</strong> 基于<strong>IP、Port、FQDN</strong>的建立的</p>
</li>
<li><p><strong>CGI(通用网关接口):</strong></p>
<p>​        CGI是WWW技术中最重要的技术之一，有着不可替代的重要地位。CGI是外部应用程序与WEB服务器之间的接口标准，是在CGI程序和Web服务器之间传递信息的过程。CGI规范允许Web服务器执行外部程序，并将它们的输出发送给Web浏览器，CGI将Web的一组简单的静态超媒体文档变成一个完整的新的交互式媒体。</p>
</li>
<li><p><strong>反向代理</strong></p>
<p>​        是指以代理服务器来接受internet上的连接请求，然后将请求转发给内部网络上的服务器，并将从服务器上得到的结果返回给internet上请求连接的客户端，此时代理服务器对外就表现为一个反向代理服务器 </p>
</li>
<li><p><strong>负载均衡</strong></p>
<p>​        负载均衡建立在现有网络结构之上，它提供了一种廉价有效透明的方法扩展网络设备和服务器的带宽、增加吞吐量、加强网络数据处理能力、提高网络的灵活性和可用性 </p>
</li>
<li><p><strong>路径别名</strong></p>
</li>
<li><p><strong>丰富的用户认证机制</strong></p>
<p>​    basic：明文传输密码信息认证机制</p>
<p>​    digestL：加密传输密码认证机制</p>
</li>
<li><p><strong>支持第三方模块</strong></p>
</li>
</ul>
<h3 id="Httpd安装及主要文件"><a href="#Httpd安装及主要文件" class="headerlink" title="Httpd安装及主要文件"></a><strong>Httpd安装及主要文件</strong></h3><p><strong>版本：</strong></p>
<p>​    CentOS 6：2.2</p>
<p>​    CentOS 7：2.4</p>
<p><strong>安装方式：</strong></p>
<ol>
<li>rpm，yum：centos发行版，稳定，建议使用</li>
<li>编译安装：定制或特殊需求</li>
</ol>
<h3 id="CentOS-6程序环境：httpd-2-2"><a href="#CentOS-6程序环境：httpd-2-2" class="headerlink" title="CentOS 6程序环境：httpd-2.2"></a>CentOS 6程序环境：httpd-2.2</h3><p><strong>配置文件：</strong></p>
<p>​       /etc/httpd/conf/httpd.conf</p>
<p>​       /etc/httpd/conf.d/*.conf</p>
<p><strong>检查配置语法：</strong></p>
<p>​    httpd –t</p>
<p>​    service httpd configtest</p>
<p><strong>服务脚本：</strong>/etc/rc.d/init.d/httpd</p>
<p><strong>脚本配置文件：</strong>/etc/sysconfig/httpd</p>
<p><strong>服务控制和启动：</strong></p>
<p>​    chkconfig httpd on|off</p>
<p>​    service {start|stop|restart|status|configtest|reload} httpd</p>
<p><strong>站点网页文档根目录：</strong></p>
<p>​    /var/www/html</p>
<p><strong>模块文件路径：</strong></p>
<p>​    /etc/httpd/modules</p>
<p>​    /usr/lib64/httpd/modules</p>
<p><strong>主程序文件：</strong></p>
<p>​    /usr/sbin/httpd</p>
<p>​    /usr/sbin/httpd.worker</p>
<p>​    /usr/sbin/httpd.event</p>
<p><strong>主进程文件：</strong></p>
<p>​    /etc/httpd/run/httpd.pid</p>
<p><strong>日志文件目录：</strong></p>
<p>​    /var/log/httpd</p>
<p>​        access_log: 访问日志</p>
<p>​        error_log：错误日志</p>
<p><strong>帮助文档包：</strong></p>
<p>​    httpd-manual</p>
<p><strong>Apache</strong>是一个模块化的程序，管理员可以选择一些模块来增加服务器的某些功能。</p>
<p>这些模块，可以在创建服务器程序时静态地编译到httpd服务器的二进制代码中，</p>
<p>也可以编译成一些独立于服务器程序的DynamicShared Objects (DSOs)文件</p>
<p>模块索引官方文档：<a href="http://httpd.apache.org/docs/2.4/mod/" target="_blank" rel="noopener">http://httpd.apache.org/docs/2.4/mod/</a></p>
<p><strong>查看静态编译的模块:</strong> httpd -l</p>
<p><strong>查看静态编译及动态装载的模块:</strong>    httpd –M</p>
<p><strong>动态模块加载:</strong>不需重启即生效</p>
<p><strong>动态模块路径:</strong>/usr/lib64/httpd/modules/</p>
<h3 id="httpd-2-4"><a href="#httpd-2-4" class="headerlink" title="httpd-2.4"></a>httpd-2.4</h3><p> <strong>新特性</strong></p>
<ul>
<li><p>MPM支持运行为DSO机制；以模块形式按需加载</p>
</li>
<li><p>event MPM生产环境可用</p>
</li>
<li><p>异步读写机制</p>
</li>
<li><p>支持每模块及每目录的单独日志级别定义</p>
</li>
<li><p>每请求相关的专用配置</p>
</li>
<li><p>增强版的表达式分析式</p>
</li>
<li><p>毫秒级持久连接时长定义</p>
</li>
<li><p>基于FQDN的虚拟主机不需要NameVirutalHost指令</p>
</li>
<li><p>新指令，AllowOverrideList</p>
</li>
<li><p>支持用户自定义变量</p>
</li>
<li><p>更低的内存消耗</p>
</li>
<li><p>修改了一些配置机制</p>
<p>不再支持使用Order, Deny, Allow来做基于IP的访问控制</p>
</li>
<li><p>新模块</p>
<ol>
<li><p>mod_proxy_fcgi: 用于MODY代理的FASCGI协议后端</p>
</li>
<li><p>mod_remoteip: </p>
<p>替换表观客户端远程IP地址用IP地址列表请求的主机名由代理或负载平衡器通过请求报头。</p>
</li>
<li><p>mod_ratelimit: 为客户端提供带宽速率限制</p>
</li>
</ol>
</li>
</ul>
<h3 id="CentOS-7程序环境："><a href="#CentOS-7程序环境：" class="headerlink" title="CentOS 7程序环境："></a>CentOS 7程序环境：</h3><p><strong>安装方法：</strong>rpm，编译安装</p>
<p><strong>配置文件：</strong></p>
<p>​    /etc/httpd/conf/httpd.conf<br>    /etc/httpd/conf.d/*.conf</p>
<p><strong>模块相关的配置文件：</strong></p>
<p>​    /etc/httpd/conf.modules.d/*.conf</p>
<p>​    systemd unit file：</p>
<p>​    /usr/lib/systemd/system/httpd.service</p>
<p><strong>主程序文件：</strong></p>
<p>​    /usr/sbin/httpd<br>    httpd-2.4支持MPM的动态切换</p>
<p><strong>日志文件：</strong></p>
<p>​    /var/log/httpd<br>        access_log：访问日志<br>        error_log：错误日志</p>
<p><strong>站点文档：</strong></p>
<p>​    /var/www/html</p>
<p><strong>模块文件路径：</strong></p>
<p>​    /usr/lib64/httpd/modules </p>
<p><strong>服务控制：</strong></p>
<p>​    systemctl enable|disable httpd.service<br>    systemctl {start|stop|restart|status} httpd.service</p>
<h2 id="二、httpd-2-2常用设置"><a href="#二、httpd-2-2常用设置" class="headerlink" title="二、httpd-2.2常用设置"></a><strong>二、httpd-2.2常用设置</strong></h2><p><strong>httpd配置文件的组成：</strong></p>
<p>grep “Section”  /etc/httpd/conf/httpd.conf ：</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">### Section 1: Global Environment： 全局设置</span><br><span class="line">### Section 2: &apos;Main&apos; server configuration： 主服务器</span><br><span class="line">### Section 3: Virtual Hosts：虚拟主机</span><br></pre></td></tr></table></figure>
<p> <strong>配置格式：</strong> directive value<br>    directive: 不区分字符大小写<br>    value: 为路径时，是否区分大小写，取决于文件系统</p>
<h3 id="1-服务器版本信息显示格式"><a href="#1-服务器版本信息显示格式" class="headerlink" title="1. 服务器版本信息显示格式"></a><strong>1. 服务器版本信息显示格式</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ServerTokens Major|Minor|Min[imal]|Prod[uctOnly]|OS|Full</span><br><span class="line">ServerTokens Prod[uctOnly] ：Server: Apache</span><br><span class="line">ServerTokens Major: Server: Apache/2</span><br><span class="line">ServerTokens Minor: Server: Apache/2.0</span><br><span class="line">ServerTokens Min[imal]: Server: Apache/2.0.41</span><br><span class="line">ServerTokens OS: Server: Apache/2.0.41 (Unix)</span><br><span class="line">ServerTokens Full (or not specified): Server: Apache/2.0.41 (Unix) PHP/4.2.2MyMod/1.2</span><br></pre></td></tr></table></figure>
<p>建议使用：<strong>ServerTokens Prod</strong></p>
<p>示例：</p>
<p>​    当使用curl –I命令访问一台主机时，系统默认： ServerTokens OS</p>
<p><img src="3-29.png" alt="2"></p>
<p>​    修改为：ServerToken Prod</p>
<p><img src="3-30.png" alt="3"></p>
<h3 id="2-修改监听的IP和Port"><a href="#2-修改监听的IP和Port" class="headerlink" title="2. 修改监听的IP和Port"></a><strong>2. 修改监听的IP和Port</strong></h3><p><strong>Listen [IP:]PORT</strong></p>
<p>(1) 省略IP表示为本机所有IP</p>
<p>(2) Listen指令至少一个，可重复出现多次</p>
<p>​    Listen 80</p>
<p>​    Listen 8080</p>
<p>示例：vim /etc/httpd/conf/httpd.conf</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Listen 192.168.1.7:8080</span><br><span class="line">Lsten 80</span><br></pre></td></tr></table></figure>
<p>注：当主配置文件/etc/httpd/conf/httpd.conf以及 /etc/httpd/conf.d目录下同时有Listen指令时，将同时生效</p>
<h3 id="3-持久连接"><a href="#3-持久连接" class="headerlink" title="3.持久连接"></a><strong>3.持久连接</strong></h3><p><strong>Persistent Connection：</strong>连接建立，每个资源获取完成后不会断开连接，而是继续等待其它的请求完成，</p>
<p>默认关闭持久连接</p>
<p>断开条件：数量限制：100</p>
<p>时间限制：以秒为单位， httpd-2.4 支持毫秒级</p>
<p>副作用：对并发访问量较大的服务器，持久连接功能会使用有些请求得不到响应</p>
<p>折衷：使用较短的持久连接时间</p>
<p>设置： </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">KeepAlive On|Off     # 开启或关闭持久连接</span><br><span class="line">KeepAliveTimeout 15  # 设置持久连接的时间限制</span><br><span class="line">MaxKeepAliveRequests 100     # 设置断开持久连接的数量限制</span><br></pre></td></tr></table></figure>
<p>测试：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">telnet WEB_SERVER_IP PORT</span><br><span class="line">GET /URL HTTP/1.1</span><br><span class="line">Host: WEB_SERVER_IP</span><br></pre></td></tr></table></figure>
<h3 id="4-MPM-多路处理模块"><a href="#4-MPM-多路处理模块" class="headerlink" title="4. MPM 多路处理模块"></a><strong>4. MPM 多路处理模块</strong></h3><p>​    经过适当的配置，可以提高服务器的负载能力。</p>
<p>​    原理是通过增加服务进程数量使服务器可以同时处理更多用户请求。</p>
<p>​    三种模式：prefork, worker, event（2.2为试验阶段）</p>
<p>​    httpd-2.2不支持同时编译多个模块，所以只能编译时选定一个；rpm安装</p>
<p>​    的包提供三个二进制程序文件，分别用于实现对不同MPM机制的支持</p>
<p>​    确认方法：</p>
<p>​    httpd –V</p>
<p><img src="1-29.png" alt="1"></p>
<p>​    ps aux | grep httpd</p>
<p>​     <strong>默认</strong>为/usr/sbin/httpd, 即<strong>prefork</strong>模式</p>
<p>​    <strong>更换使用的httpd程序：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/sysconfig/httpd</span><br><span class="line">  HTTPD=/usr/sbin/httpd.worker   #切换worker模式,也可切换成其他模式</span><br></pre></td></tr></table></figure>
<p>​     <strong>重启服务生效</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">service httpd restart  </span><br><span class="line">pstree -p|grep httpd   # 查看进程和线程发现httpd</span><br></pre></td></tr></table></figure>
<p>  <strong>Httpd 2.4 与之不同</strong></p>
<p>​    <strong>以动态模块方式提供</strong></p>
<p>   <strong>配置文件：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/httpd/conf.modules.d/00-mpm.conf</span><br><span class="line"></span><br><span class="line">httpd –M |grep mpm</span><br></pre></td></tr></table></figure>
<p>   <strong>重启服务生效</strong></p>
<p>​    pstree -p|grep httpd 查看进程和线程</p>
<h4 id="prefork："><a href="#prefork：" class="headerlink" title="prefork："></a><strong>prefork：</strong></h4><p>多进程I/O模型，每个进程响应一个请求，默认模型</p>
<p>一个主进程：生成和回收n个子进程，创建套接字，不响应请求</p>
<p>多个子进程：工作work进程，每个子进程处理一个请求；系统初始时，预先生成多个空闲进程，等待请求，最大不超过1024个</p>
<p><strong>优点：</strong>成熟稳定，兼容所有新老模块。同时，不需要担心线程安全的问题。（我们常用的mod_php，PHP的拓展不需要支持线程安全）</p>
<p><strong>缺点：</strong>一个进程相对占用更多的系统资源，消耗更多的内存。而且，它并不擅长处理高并发请求，在这种场景下，它会将请求放进队列中，一直等到有可用进程，请求才会被处理。</p>
<p><strong>prefork的默认配置：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;IfModule prefork.c&gt;</span><br><span class="line"></span><br><span class="line">StartServers 8 服务启动时，预先同时开启几个进程</span><br><span class="line"></span><br><span class="line">MinSpareServers 5</span><br><span class="line"></span><br><span class="line">MaxSpareServers 20</span><br><span class="line"></span><br><span class="line">ServerLimit 256 最多进程数,最大20000</span><br><span class="line"></span><br><span class="line">MaxClients 256 最大并发</span><br><span class="line"></span><br><span class="line">MaxRequestsPerChild 4000 子进程最多能处理的请求数量。在处理MaxRequestsPerChild 个请求之后,子进程将会被父进程终止，这时候子进程占用的内存就会释放(为0时永远不释放）</span><br><span class="line"></span><br><span class="line">&lt;/IfModule&gt;</span><br></pre></td></tr></table></figure>
<h4 id="worker："><a href="#worker：" class="headerlink" title="worker："></a><strong>worker：</strong></h4><p>复用的多进程I/O模型,多进程多线程，IIS使用此模型</p>
<p>一个主进程：生成m个子进程，每个子进程负责生个n个线程，每个线程响应一个请求，并发响应请求：m*n</p>
<p><strong>优点：</strong>占据更少的内存，高并发下表现更优秀。</p>
<p><strong>缺点：</strong>必须考虑线程安全的问题，因为多个子线程是共享父进程的内存地址的。</p>
<p>如果使用keep-alive的长连接方式，某个线程会一直被占据，也许中间几乎没有请求，需要一直等待到超时才会被</p>
<p>释放。如果过多的线程，被这样占据，也会导致在高并发场景下的无服务线程可用。（该问题在prefork模式下，</p>
<p>同样会发生）</p>
<p><strong>worker的默认配置：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;IfModule worker.c&gt;</span><br><span class="line"></span><br><span class="line">StartServers 4</span><br><span class="line"></span><br><span class="line">MaxClients 300</span><br><span class="line"></span><br><span class="line">MinSpareThreads 25</span><br><span class="line"></span><br><span class="line">MaxSpareThreads 75</span><br><span class="line"></span><br><span class="line">ThreadsPerChild 25</span><br><span class="line"></span><br><span class="line">MaxRequestsPerChild 0 无限制</span><br><span class="line"></span><br><span class="line">&lt;/IfModule&gt;</span><br></pre></td></tr></table></figure>
<h4 id="event："><a href="#event：" class="headerlink" title="event："></a><strong>event：</strong></h4><p>事件驱动模型（worker模型的变种）</p>
<p>一个主进程：生成m个子进程，每个进程直接响应n个请求，并发响应请求：m*n，</p>
<p>有专门的线程来管理这些keep-alive类型的线程，当有真实请求时，将请求传递给服务线程，</p>
<p>执行完毕后，又允许释放。这样增强了高并发场景下的请求处理能力</p>
<p>​    httpd-2.2: event 测试版，centos6默认</p>
<p>​    httpd-2.4：event 稳定版，centos7默认</p>
<h3 id="5-DSO-动态共享对象"><a href="#5-DSO-动态共享对象" class="headerlink" title="5. DSO 动态共享对象"></a>5. DSO 动态共享对象</h3><p><strong>加载动态模块配置文件</strong></p>
<p>​    /etc/httpd/conf/httpd.conf</p>
<p><strong>配置指定实现模块加载格式</strong>：</p>
<p>​    LoadModule &lt;mod_name&gt; &lt;mod_path&gt;</p>
<p><strong>模块文件路径可使用相对路径</strong>：</p>
<p>相对于ServerRoot（默认/etc/httpd）</p>
<p>示例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">LoadModule auth_basic_module</span><br><span class="line"></span><br><span class="line">modules/mod_auth_basic.so</span><br></pre></td></tr></table></figure>
<h3 id="6-更改httpd服务默认目录"><a href="#6-更改httpd服务默认目录" class="headerlink" title="6. 更改httpd服务默认目录"></a><strong>6. 更改httpd服务默认目录</strong></h3><p><strong>DocumentRoot  “/path”</strong></p>
<p>文档路径映射：DocumentRoot指向的路径为URL路径的起始位置</p>
<p>示例：</p>
<p>​    DocumentRoot “/app/data”</p>
<p>CentOS7必须给目录授权才能使用：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;Directory “/app/data”&gt;</span><br><span class="line">    Require all granted</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line"></span><br><span class="line">http://HOST:PORT/test/index.html</span><br><span class="line">**–&gt;** /app/data/test/index.html</span><br></pre></td></tr></table></figure>
<p>注意：SELinux和iptables的状态</p>
<h3 id="7-定义站点未指定时的默认页面"><a href="#7-定义站点未指定时的默认页面" class="headerlink" title="7. 定义站点未指定时的默认页面"></a><strong>7. 定义站点未指定时的默认页面</strong></h3><p>默认为testing页面：</p>
<p><strong>DirectoryIndex index.html index.html.var</strong></p>
<h3 id="8-基于IP的访问控制"><a href="#8-基于IP的访问控制" class="headerlink" title="8. 基于IP的访问控制:"></a><strong>8. 基于IP的访问控制:</strong></h3><p><strong>CentOS 6：</strong></p>
<p>order和allow、deny</p>
<p>放在directory, .htaccess中</p>
<p>order：定义生效次序；写在后面的表示默认法则</p>
<p>​    Order allow,deny</p>
<p>​    Order deny,allow</p>
<p>Allow from和Deny from：定义客户端地址</p>
<p>客户端地址：</p>
<p>IP</p>
<p>网络: 172.16</p>
<p>172.16.0.0</p>
<p>172.16.0.0/16</p>
<p>172.16.0.0/255.255.0.0</p>
<p><strong>CentOS 7：</strong></p>
<p><strong>无明确授权的目录</strong>，默认拒绝</p>
<p><strong>允许所有主机访问</strong>：Require all granted</p>
<p><strong>拒绝所有主机访问</strong>：Require all denied</p>
<p><strong>控制特定的IP访问</strong>：</p>
<p>​    Require ip IPADDR：授权指定来源的IP访问</p>
<p>​    Require not ip IPADDR：拒绝特定的IP访问</p>
<p><strong>控制特定的主机访问：</strong></p>
<p>​    Require host HOSTNAME：授权特定主机访问</p>
<p>​    Require not host HOSTNAME：拒绝</p>
<p><strong>HOSTNAME：</strong></p>
<p>​    FQDN：特定主机</p>
<p>​    domin.tld：指定域名下的所有主机</p>
<h3 id="9-针对资源进行访问控制"><a href="#9-针对资源进行访问控制" class="headerlink" title="9. 针对资源进行访问控制"></a><strong>9. 针对资源进行访问控制</strong></h3><p>可基于两种机制指明对哪些资源进行何种访问控制</p>
<p>访问控制机制有两种：客户端来源地址，用户账号</p>
<h4 id="文件系统路径："><a href="#文件系统路径：" class="headerlink" title="文件系统路径："></a><strong>文件系统路径：</strong></h4><p><strong>针对目录：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;Directory  “/path”&gt;</span><br><span class="line">…</span><br><span class="line">&lt;/Directory&gt;</span><br></pre></td></tr></table></figure>
<p><strong>针对文件，支持通配符：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;File “/path/file”&gt;</span><br><span class="line">…</span><br><span class="line">&lt;/File&gt;</span><br></pre></td></tr></table></figure>
<p><strong>支持正则表达式：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;FileMatch “PATTERN”&gt;</span><br><span class="line">…</span><br><span class="line">&lt;/FileMatch&gt;</span><br></pre></td></tr></table></figure>
<h4 id="URL路径："><a href="#URL路径：" class="headerlink" title="URL路径："></a><strong>URL路径：</strong></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;Location “”&gt;</span><br><span class="line">…</span><br><span class="line">&lt;/Location&gt;</span><br><span class="line"></span><br><span class="line">&lt;LocationMatch “”&gt;</span><br><span class="line">…</span><br><span class="line">&lt;/LocationMatch&gt;</span><br></pre></td></tr></table></figure>
<p><strong>示例：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;FilesMatch “\.(gif|jpe?g|png)$”&gt;</span><br><span class="line"></span><br><span class="line">&lt;Files “?at.*”&gt; 通配符</span><br><span class="line"></span><br><span class="line">&lt;Location /status&gt;</span><br><span class="line"></span><br><span class="line">&lt;LocationMatch “/(extra|special)/data”&gt;</span><br></pre></td></tr></table></figure>
<h3 id="10-中“基于源地址”实现访问控制"><a href="#10-中“基于源地址”实现访问控制" class="headerlink" title="10 . 中“基于源地址”实现访问控制"></a><strong>10 . <directory>中“基于源地址”实现访问控制</directory></strong></h3><p><strong>(1) Options：</strong>后跟1个或多个以空白字符分隔的选项列表</p>
<p>在选项前的+，- 表示增加或删除指定选项</p>
<p>常见选项：</p>
<p>Indexes：指明的URL路径下不存在与定义的主页面资源相符的资源</p>
<p>文件时，返回索引列表给用户</p>
<p>FollowSymLinks：允许访问符号链接文件所指向的源文件</p>
<p>None：全部禁用</p>
<p>All： 全部允许</p>
<p><strong>示例：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;Directory /web/docs&gt;</span><br><span class="line">	Options Indexes FollowSymLinks</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line"></span><br><span class="line">&lt;Directory /web/docs/spec&gt;</span><br><span class="line">	Options FollowSymLinks</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line"></span><br><span class="line">&lt;Directory /web/docs&gt;</span><br><span class="line">	Options Indexes FollowSymLinks</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line"></span><br><span class="line">&lt;Directory /web/docs/spec&gt;</span><br><span class="line">	Options +Includes -Indexes</span><br><span class="line">&lt;/Directory&gt;</span><br></pre></td></tr></table></figure>
<p><strong>(2) AllowOverride</strong></p>
<p>与访问控制相关的哪些指令可以放在指定目录下的.htaccess（由AccessFileName指定）文件中，</p>
<p>覆盖之前的配置指令</p>
<p>只对<directory>语句有效</directory></p>
<p>​    AllowOverride All: 所有指令都有效</p>
<p>​    AllowOverride None：.htaccess 文件无效</p>
<p>​    AllowOverride AuthConfig Indexes 除了AuthConfig 和Indexes的其它指令都无法覆盖</p>
<h3 id="11-日志设定"><a href="#11-日志设定" class="headerlink" title="11.日志设定"></a><strong>11.日志设定</strong></h3><p><strong>日志类型：</strong> /var/log/httpd</p>
<p>​    访问日志</p>
<p>​    错误日志</p>
<p><strong>错误日志：</strong></p>
<p>​    ErrorLog logs/error_log</p>
<p>​    LogLevel warn     </p>
<p>​    LogLevel 可选值:</p>
<p><strong>debug, info, notice, warn,error,crit, alert, emerg</strong>                越靠后等级越高</p>
<p><strong>访问日志：</strong></p>
<p>定义日志格式：<strong>LogFormat format strings</strong></p>
<p><strong>LogFormat “%h %l %u %t \”%r\” %&gt;s %b \”%{Referer}i\” \”%{User-Agent}i\”” combined</strong></p>
<p>使用日志格式：</p>
<p><strong>CustomLog logs/access_log combined</strong></p>
<p>参考帮助：<a href="http://httpd.apache.org/docs/2.2/mod/mod_log_config.html#formats" target="_blank" rel="noopener">http://httpd.apache.org/docs/2.2/mod/mod_log_config.html#formats</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">%h 客户端IP地址</span><br><span class="line">%l 远程用户,启用mod_ident才有效，通常为减号“-”</span><br><span class="line">%u 验证（basic，digest）远程用户,非登录访问时，为一个减号“-”</span><br><span class="line">%t 服务器收到请求时的时间</span><br><span class="line">%r  First line of request，即表示请求报文的首行；记录了此次请求的“方法”，“URL”以及协议版本</span><br><span class="line">%&gt;s 响应状态码</span><br><span class="line">%b 响应报文的大小，单位是字节；不包括响应报文http首部</span><br><span class="line">%&#123;Referer&#125;i 请求报文中首部“referer”的值；即从哪个页面中的超链接跳转至当前页面的，超链接来源</span><br><span class="line"></span><br><span class="line">%&#123;User-Agent&#125;i  显示浏览器类型；请求报文中首部“User-Agent”的值；即发出请求的应用程序更多的格式选项请参考官方**mod_log_config** 文档</span><br></pre></td></tr></table></figure>
<p><strong>示例：</strong></p>
<p>默认日志中日期显示为：<strong>[21/Jun/2018:17:00:54 +0800]</strong></p>
<p><strong>vim /etc/httpd/conf/httpd.conf</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">LogFormat “%h %l %u %t \”%r\” %&gt;s %b \”%&#123;Referer&#125;i\” \”%&#123;User-Agent&#125;i\”” combined找到此行</span><br><span class="line">修改 %t **==&gt;**  %&#123;%F %T&#125;t</span><br><span class="line">再次打开access_log日志日期格式：**2018-06-21 19:02:27**</span><br></pre></td></tr></table></figure>
<h3 id="12-设定默认字符集"><a href="#12-设定默认字符集" class="headerlink" title="12. 设定默认字符集"></a><strong>12. 设定默认字符集</strong></h3><p><strong>/etc/httpd/conf/httpd.conf： AddDefaultCharset UTF-8</strong>  </p>
<p>中文字符集：GBK, GB2312, GB18030</p>
<h3 id="13定义路径别名"><a href="#13定义路径别名" class="headerlink" title="13定义路径别名"></a><strong>13定义路径别名</strong></h3><p><strong>格式： Alias /URL/ “/PATH/”</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">DocumentRoot “/www/htdocs”</span><br><span class="line"></span><br><span class="line">http://www.magedu.com/download/bash.rpm</span><br><span class="line"></span><br><span class="line">==&gt;/www/htdocs/download/bash.rpm</span><br><span class="line"></span><br><span class="line">Alias /download/ “/rpms/pub/”</span><br><span class="line"></span><br><span class="line">http://www.magedu.com/download/bash.rpm</span><br><span class="line"></span><br><span class="line">==&gt;/rpms/pub/bash.rpm</span><br><span class="line"></span><br><span class="line">http://www.magedu.com/images/logo.png</span><br><span class="line"></span><br><span class="line">==&gt;/www/htdocs/images/logo.png</span><br><span class="line"></span><br><span class="line">注意：CentOS 7要给重新指定的路径进行grant授权才可访问</span><br><span class="line"></span><br><span class="line">&lt;directory “/rpm/pub”&gt;</span><br><span class="line"></span><br><span class="line">require all granted</span><br><span class="line"></span><br><span class="line">&lt;/directory&gt;</span><br></pre></td></tr></table></figure>
<h3 id="14-基于用户的访问控制"><a href="#14-基于用户的访问控制" class="headerlink" title="14. 基于用户的访问控制"></a><strong>14. 基于用户的访问控制</strong></h3><p>认证质询：<strong>WWW-Authenticate</strong>：响应码为401，拒绝客户端请求，并说明要求客户端提供账号和密码</p>
<p>认证：Authorization：客户端用户填入账号和密码后再次发送请求报文；认证通过时，则服务器发送响应的资源</p>
<p>认证方式两种：</p>
<p>​        <strong>basic：</strong>明文</p>
<p>​        <strong>digest：</strong>消息摘要认证,兼容性差</p>
<p>安全域：需要用户认证后方能访问的路径；应该通过名称对其进行标识，以便于告知用户认证的原因</p>
<p>用户的账号和密码</p>
<p>​    虚拟账号：仅用于访问某服务时用到的认证标识</p>
<p>​    存储：文本文件，SQL数据库，ldap目录存储，nis等</p>
<p>basic认证配置示例：</p>
<ol>
<li>定义安全域</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;Directory “/path”&gt;</span><br><span class="line">Options None</span><br><span class="line">AllowOverride None</span><br><span class="line">AuthType Basic</span><br><span class="line">AuthName “String“</span><br><span class="line">AuthUserFile “/PATH/HTTPD_USER_PASSWD_FILE”</span><br><span class="line">Require user username1 username2 …</span><br><span class="line">&lt;/Directory&gt;</span><br></pre></td></tr></table></figure>
<p>​    允许账号文件中的所有用户登录访问：</p>
<p>​    Require valid-user</p>
<ol start="2">
<li><p>提供账号和密码存储（文本文件）</p>
<p>使用专用命令完成此类文件的创建及用户管理</p>
<p>htpasswd [options] /PATH/HTTPD_PASSWD_FILE username</p>
<p>​    -c：自动创建文件，仅应该在文件不存在时使用</p>
<p>​    -p：明文密码</p>
<p>​    -d：CRYPT格式加密，默认</p>
<p>​    -m：md5格式加密</p>
<p>​    -s:  sha格式加密</p>
<p>​    -D：删除指定用户</p>
</li>
</ol>
<p>基于组账号进行认证</p>
<ol>
<li>定义安全域</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;Directory “/path”&gt;</span><br><span class="line">AuthType Basic</span><br><span class="line">AuthName “String“</span><br><span class="line">AuthUserFile “/PATH/HTTPD_USER_PASSWD_FILE”</span><br><span class="line">AuthGroupFile “/PATH/HTTPD_GROUP_FILE”</span><br><span class="line">Require group grpname1 grpname2 …</span><br><span class="line">&lt;/Directory&gt;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li><p>创建用户账号和组账号文件</p>
<p>组文件：每一行定义一个组</p>
<p>GRP_NAME: username1 username2 …</p>
</li>
</ol>
<p><strong>示例：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;Directory “/www/htdocs/admin”&gt;</span><br><span class="line">    Options None</span><br><span class="line">    AllowOverride None</span><br><span class="line">    AuthType Basic</span><br><span class="line">    AuthName “Administator private”</span><br><span class="line">    AuthUserFile “/etc/httpd/conf.d/.htpasswd”</span><br><span class="line">    AuthGroupFile “/etc/httpd/conf.d/.htgroup”</span><br><span class="line">    Require group webadmins</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line"></span><br><span class="line">vim /etc/httpd/conf.d/.htgroup</span><br><span class="line"></span><br><span class="line">webadmins:wang mage</span><br></pre></td></tr></table></figure>
<p>远程客户端和用户验证的控制</p>
<p>Satisfy ALL|Any</p>
<p>ALL 客户机IP和用户验证都需要通过才可以</p>
<p>Any客户机IP和用户验证,有一个满足即可</p>
<p>示例：</p>
<p>​    Require valid-user</p>
<p>​    Order allow,deny</p>
<p>​    Allow from 192.168.1</p>
<p>​    Satisfy Any</p>
<h3 id="15-实现用户家目录的http共享"><a href="#15-实现用户家目录的http共享" class="headerlink" title="15. 实现用户家目录的http共享"></a><strong>15. 实现用户家目录的http共享</strong></h3><p>基于模块<strong>mod_userdir.so</strong>实现</p>
<p>​    httpd -M |grep userdir</p>
<p>​    SELinux: http_enable_homedirs</p>
<p><strong>相关设置：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/httpd/conf/httpd.conf</span><br><span class="line">    &lt;IfModule mod_userdir.c&gt;</span><br><span class="line">        #UserDir disabled</span><br><span class="line">        UserDir public_html #指定共享目录的名称</span><br><span class="line">    &lt;/IfModule&gt;</span><br></pre></td></tr></table></figure>
<p><strong>准备目录</strong></p>
<p>​    su – lpx;mkdir ~/public_html</p>
<p>​    setfacl –m u:apache:x ~lpx</p>
<p><strong>访问</strong></p>
<p><a href="http://localhost/~lpx/index.html" target="_blank" rel="noopener">http://localhost/~lpx/index.html</a></p>
<h3 id="16-status页面"><a href="#16-status页面" class="headerlink" title="16. status页面"></a><strong>16. status页面</strong></h3><p><strong>功能：</strong>显示系统中的状态信息，了解服务器状态，监控用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">LoadModule status_module modules/mod_status.so</span><br><span class="line">&lt;Location /server-status&gt;</span><br><span class="line">SetHandler server-status</span><br><span class="line">Require all granted</span><br><span class="line">&lt;/Location&gt;</span><br><span class="line">ExtendedStatus On 显示扩展信息</span><br></pre></td></tr></table></figure>
<p><strong>访问：</strong></p>
<p><strong><a href="http://IP:PORT/server-status" target="_blank" rel="noopener">http://IP:PORT/server-status</a></strong>     就可以监控apache服务了下面就是该网页所显示的监控情况：</p>
<p><img src="4-24.png" alt="4"></p>
<p><strong>参数说明：</strong></p>
<p>字段                         说明</p>
<p>Server Version        Apache 服务器的版本。</p>
<p>Server MPM           MPM工作模式</p>
<p>Server Built             Apache 服务器编译安装的时间。</p>
<p>Current Time          目前的系统时间。</p>
<p>Restart Time           Apache 重新启动的时间。</p>
<p>Parent Server Generation        Apache 父程序 (parent process) 的世代编号，就是 httpd 接收到 SIGHUP</p>
<p>而重新启动的次数。</p>
<p>Server uptime         Apache 启动后到现在经过的时间。</p>
<p>Total accesses          到目前为此 Apache 接收的联机数量及传输的数据量。</p>
<p>CPU Usage               目前 CPU 的使用情形。</p>
<p>_SWSS….              所有 Apache process 目前的状态。每一个字符表示一个程序，最多可以显示 256 个程序</p>
<p>的状态。</p>
<p>Scoreboard Key         上述状态的说明。以下为每一个字符符号所表示的意义：</p>
<p>* _：等待连结中。</p>
<p>* S：启动中。</p>
<p>* R：正在读取要求。</p>
<p>* W：正在送出回应。</p>
<p>* K：处于保持联机的状态。</p>
<p>* D：正在查找DNS。</p>
<p>* C：正在关闭连结。</p>
<p>* L：正在写入记录文件。</p>
<p>* G：进入正常结束程序中。</p>
<p>* I：处理闲置。</p>
<p>* .：尚无此程序。</p>
<p>Srv         本程序与其父程序的世代编号。</p>
<p>PID        本程序的process id。</p>
<p>Acc         分别表示本次联机、本程序所处理的存取次数。</p>
<p>M           该程序目前的状态。</p>
<p>CPU       该程序所耗用的CPU资源。</p>
<p>SS           距离上次处理要求的时间。</p>
<p>Req        最后一次处理要求所耗费的时间，以千分之一秒为单位。</p>
<p>Conn      本次联机所传送的数据量。</p>
<p>Child       由该子程序所传送的数据量。</p>
<p>Slot        由该 Slot 所传送的数据量。</p>
<p>Client       客户端的地址。</p>
<p>VHost       属于哪一个虚拟主机或本主机的IP。</p>
<p>Request     联机所提出的要求信息。</p>
<h2 id="三、httpd-2-4常用配置"><a href="#三、httpd-2-4常用配置" class="headerlink" title="三、httpd-2.4常用配置"></a><strong>三、httpd-2.4常用配置</strong></h2><h3 id="1-切换使用的MPM"><a href="#1-切换使用的MPM" class="headerlink" title="1.切换使用的MPM"></a>1.切换使用的MPM</h3><ul>
<li><p>Centos 7:   /etc/httpd/conf.modules.d/00-mpm.conf</p>
<pre><code>启用要启用的MPM相关的LoadModule指令即可
</code></pre></li>
<li><p>centos6编译安装:</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/httpd24/httpd.conf</span><br><span class="line">    Include /etc/httpd24/extra/httpd-mpm.conf</span><br><span class="line">    LoadModule mpm_event_module</span><br><span class="line">    modules/mod_mpm_event.so</span><br></pre></td></tr></table></figure>
<h3 id="2-主目录："><a href="#2-主目录：" class="headerlink" title="2.主目录："></a>2.主目录：</h3><p>​    DocumentRoot /path</p>
<h3 id="3-基于IP的访问控制"><a href="#3-基于IP的访问控制" class="headerlink" title="3.基于IP的访问控制:"></a>3.基于IP的访问控制:</h3><p>无明确授权的目录，默认拒绝<br>允许所有主机访问：Require all granted<br>拒绝所有主机访问：Require all denied<br>控制特定的IP访问：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Require ip IPADDR：授权指定来源的IP访问</span><br><span class="line">Require not ip IPADDR：拒绝特定的IP访问</span><br></pre></td></tr></table></figure>
<p>控制特定的主机访问：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Require host HOSTNAME：授权特定主机访问</span><br><span class="line">Require not host HOSTNAME：拒绝</span><br><span class="line">HOSTNAME：</span><br><span class="line">	FQDN：特定主机	</span><br><span class="line">	domin.tld：指定域名下的所有主机</span><br></pre></td></tr></table></figure>
<p> 不能有失败，至少有一个成功匹配才成功，即失败优先</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;RequireAll&gt;</span><br><span class="line">	Require all granted</span><br><span class="line">	Require not ip 172.16.1.1 拒绝特定IP</span><br><span class="line">&lt;/RequireAll&gt;</span><br></pre></td></tr></table></figure>
<p> 多个语句有一个成功，则成功，即成功优先</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;RequireAny&gt;</span><br><span class="line">	Require all denied</span><br><span class="line">	require ip 172.16.1.1 允许特定IP</span><br><span class="line">&lt;/RequireAny&gt;</span><br></pre></td></tr></table></figure>
<h3 id="4-虚拟主机"><a href="#4-虚拟主机" class="headerlink" title="4. 虚拟主机"></a>4. 虚拟主机</h3><p>基于FQDN的虚拟主机不再需要NameVirutalHost指令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;VirtualHost *:80&gt;</span><br><span class="line">    ServerName www.b.net</span><br><span class="line">    DocumentRoot &quot;/apps/b.net/htdocs&quot;</span><br><span class="line">    &lt;Directory &quot;/apps/b.net/htdocs&quot;&gt;</span><br><span class="line">        Options None</span><br><span class="line">        AllowOverride None</span><br><span class="line">        Require all granted</span><br><span class="line">    &lt;/Directory&gt;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure>
<p>注意：任意目录下的页面只有显式授权才能被访问</p>
<h3 id="5-ssl-安装mod-ssl，和httpd-2-2相同配置"><a href="#5-ssl-安装mod-ssl，和httpd-2-2相同配置" class="headerlink" title="5. ssl:安装mod_ssl，和httpd-2.2相同配置"></a>5. ssl:安装mod_ssl，和httpd-2.2相同配置</h3><h3 id="6-KeepAlive-on"><a href="#6-KeepAlive-on" class="headerlink" title="6. KeepAlive on"></a>6. KeepAlive on</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">KeepAliveTimeout #ms</span><br><span class="line">MaxKeepAliveRequests 100	毫秒级持久连接时长定义</span><br></pre></td></tr></table></figure>
<h2 id="四、mod-deflate模块——压缩页面优化传输"><a href="#四、mod-deflate模块——压缩页面优化传输" class="headerlink" title="四、mod_deflate模块——压缩页面优化传输"></a>四、mod_deflate模块——压缩页面优化传输</h2><p><strong>mod_deflate</strong></p>
<p><strong>功能：</strong>压缩页面优化传输速度</p>
<p><strong>官方文档：</strong><a href="http://httpd.apache.org/docs/2.4/mod/mod_deflate.html" target="_blank" rel="noopener">http://httpd.apache.org/docs/2.4/mod/mod_deflate.html</a></p>
<p><strong>适用场景：</strong></p>
<p>(1) 节约带宽，额外消耗CPU；同时，可能有些较老浏览器不支持</p>
<p>(2) 压缩适于压缩的资源，例如文本文件</p>
<p><strong>LoadModule deflate_module modules/mod_deflate.so SetOutputFilter DEFLATE</strong></p>
<p># Restrict compression to these MIME types</p>
<p>AddOutputFilterByType DEFLATE text/plain</p>
<p>AddOutputFilterByType DEFLATE text/html</p>
<p>AddOutputFilterByType DEFLATE application/xhtml+xml</p>
<p>AddOutputFilterByType DEFLATE text/xml</p>
<p>AddOutputFilterByType DEFLATE application/xml</p>
<p>AddOutputFilterByType DEFLATE application/x-javascript</p>
<p>AddOutputFilterByType DEFLATE text/javascript</p>
<p>AddOutputFilterByType DEFLATE text/css</p>
<p>Level of compression (Highest 9 – Lowest 1)                   压缩比(1-9)</p>
<p><strong>DeflateCompressionLevel 9</strong></p>
<p>排除特定旧版本的浏览器，不支持压缩</p>
<p>Netscape 4.x 只压缩text/html</p>
<p>BrowserMatch ^Mozilla/4 gzip-only-text/html</p>
<p>Netscape 4.06-08三个版本 不压缩</p>
<p>BrowserMatch ^Mozilla/4.0[678] no-gzip</p>
<p>Internet Explorer标识本身为“Mozilla / 4”，但实际上是能够处理请求的压缩。</p>
<p>如果用户代理首部匹配字符串“MSIE”（“B”为单词边界”），就关闭之前定</p>
<p>义的限制</p>
<p>BrowserMatch \bMSI[E] !no-gzip !gzip-only-text/html</p>
<p><strong>查看网站是否压缩</strong></p>
<p>方法一：利用curl命令</p>
<p>Curl -I -v –compressed  <a href="http://www.178linux.com/" target="_blank" rel="noopener">http://www.178linux.com</a></p>
<p>方法二：站长工具查询</p>
<p><a href="http://tool.chinaz.com/Gzips/" target="_blank" rel="noopener">http://tool.chinaz.com/Gzips/</a></p>
<p><img src="%E5%8E%8B%E7%BC%A9%E6%9F%A5%E8%AF%A2.png" alt="压缩查询"></p>
<p><strong>示例：</strong></p>
<p>查看mod_deflate.so模块是否已加载</p>
<p><img src="1-30.png" alt="1"></p>
<p>修改配置文件</p>
<p><img src="2-32.png" alt="2"></p>
<p>重启httpd服务即可</p>
<p>systemctl restart httpd</p>
<h2 id="五、centos6-9编译安装httpd2-4-29"><a href="#五、centos6-9编译安装httpd2-4-29" class="headerlink" title="五、centos6.9编译安装httpd2.4.29"></a>五、centos6.9编译安装httpd2.4.29</h2><ol>
<li>解压包</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">yum groupinstall &quot;development tools&quot;</span><br><span class="line">yum install openssl-devel pcre-devel expat-devel </span><br><span class="line"></span><br><span class="line">tar xvf apr-1.6.3.tar.bz2 </span><br><span class="line">tar xvf apr-util-1.6.1.tar.bz2 </span><br><span class="line">tar xvf httpd-2.4.29.tar.bz2</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>安装apr和apr-util</li>
</ol>
<p>安装apr-1.4+</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd apr-1.6.2</span><br><span class="line">./configure --prefix=/app/apr</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure>
<p>安装apr-util-1.4+</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd ../apr-util-1.6.0</span><br><span class="line">./configure --prefix=/app/apr-util --with-apr=/app/apr/</span><br><span class="line">make -j 2 &amp;&amp; make install</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>编译安装httpd2.4</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">./configure --prefix=/app/httpd24 \</span><br><span class="line">--enable-so \</span><br><span class="line">--enable-ssl \</span><br><span class="line">--enable-cgi \</span><br><span class="line">--enable-rewrite \</span><br><span class="line">--with-zlib \</span><br><span class="line">--with-pcre \</span><br><span class="line">--with-apr=/app/apr/ \</span><br><span class="line">--with-apr-util=/app/apr-util/ \</span><br><span class="line">--enable-modules=most \</span><br><span class="line">--enable-mpms-shared=all \</span><br><span class="line">--with-mpm=prefork</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>环境变量</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo &apos;PATH=/app/httpd24/bin/:$PATH&apos; &gt; /etc/profile.d/httpd24.sh</span><br><span class="line">. /etc/profile.d/httpd24.sh</span><br></pre></td></tr></table></figure>
<ol start="5">
<li>用户和组</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd -r -s /sbin/nologin apache</span><br></pre></td></tr></table></figure>
<ol start="6">
<li>配置文件</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim /app/httpd24/conf/httpd.conf </span><br><span class="line">    user apache</span><br><span class="line">    group apache</span><br></pre></td></tr></table></figure>
<ol start="7">
<li>开机脚本</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">cp /etc/init.d/httpd /etc/init.d/httpd24</span><br><span class="line">vim /etc/init.d/httpd24</span><br><span class="line">    apachectl=/app/httpd24/bin/apachectl</span><br><span class="line">    httpd=$&#123;HTTPD-/app/httpd24/bin/httpd&#125;</span><br><span class="line">    pidfile=$&#123;PIDFILE-/app/httpd24/logs/httpd.pid&#125;</span><br><span class="line">    lockfile=$&#123;LOCKFILE-/var/lock/subsys/httpd24&#125;</span><br><span class="line"></span><br><span class="line">chkconfig --add httpd24</span><br><span class="line">chkconfig httpd24 on</span><br><span class="line">service httpd24 start</span><br></pre></td></tr></table></figure>
<h2 id="六、实现虚拟主机——单台主机搭建多个网站"><a href="#六、实现虚拟主机——单台主机搭建多个网站" class="headerlink" title="六、实现虚拟主机——单台主机搭建多个网站"></a><strong>六、实现虚拟主机——单台主机搭建多个网站</strong></h2><h3 id="前期准备："><a href="#前期准备：" class="headerlink" title="前期准备："></a><strong>前期准备：</strong></h3><p>虚拟机一台，操作系统版本为CentOS 7.4，IP地址：192.168.30.10</p>
<h3 id="1实验：基于端口号的虚拟主机"><a href="#1实验：基于端口号的虚拟主机" class="headerlink" title="1实验：基于端口号的虚拟主机"></a><strong>1实验：基于端口号的虚拟主机</strong></h3><p><strong>实验预期：</strong></p>
<p>搭建三个网站，网站与监听端口对应关系如下：</p>
<p><a href="http://www.a.com" target="_blank" rel="noopener">www.a.com</a>          Listen 81</p>
<p><a href="http://www.b.com" target="_blank" rel="noopener">www.b.com</a>          Listen 82</p>
<p><a href="http://www.c.com" target="_blank" rel="noopener">www.c.com</a>          Listen 83</p>
<p><strong>具体步骤：</strong></p>
<p>创建网站目录</p>
<p>mkdir /data/website{1,2,3} -pv</p>
<p>echo <a href="http://www.a.com" target="_blank" rel="noopener">www.a.com</a> &gt; /data/website1/index.html</p>
<p>echo <a href="http://www.b.com" target="_blank" rel="noopener">www.b.com</a> &gt; /data/website2/index.html</p>
<p>echo <a href="http://www.c.com" target="_blank" rel="noopener">www.c.com</a> &gt; /data/website3/index.html</p>
<p><img src="http://www.178linux.com/wp-content/uploads/2018/06/1-31.png" alt="1"></p>
<p>编写配置文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/httpd/conf.d/test2.conf</span><br><span class="line"></span><br><span class="line">Listen 81</span><br><span class="line"></span><br><span class="line">listen 82</span><br><span class="line"></span><br><span class="line">listen 83</span><br><span class="line"></span><br><span class="line">&lt;directory “/data/”&gt;</span><br><span class="line"></span><br><span class="line">require all granted</span><br><span class="line"></span><br><span class="line">&lt;/directory&gt;</span><br><span class="line"></span><br><span class="line">&lt;VirtualHost *:81&gt;</span><br><span class="line"></span><br><span class="line">DocumentRoot “/data/website1”</span><br><span class="line"></span><br><span class="line">ServerName www.a.com</span><br><span class="line"></span><br><span class="line">Errorlog “logs/a.com.error_log”</span><br><span class="line"></span><br><span class="line">Transferlog “logs/a.con-access_log”</span><br><span class="line"></span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line"></span><br><span class="line">&lt;VirtualHost *:82&gt;</span><br><span class="line"></span><br><span class="line">DocumentRoot “/data/website2”</span><br><span class="line"></span><br><span class="line">ServerName www.b.com</span><br><span class="line"></span><br><span class="line">Errorlog “logs/b.com.error_log”</span><br><span class="line"></span><br><span class="line">Transferlog “logs/b.con-access_log”</span><br><span class="line"></span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line"></span><br><span class="line">&lt;VirtualHost *:83&gt;</span><br><span class="line"></span><br><span class="line">DocumentRoot “/data/website3”</span><br><span class="line"></span><br><span class="line">ServerName www.c.com</span><br><span class="line"></span><br><span class="line">Errorlog “logs/c.com.error_log”</span><br><span class="line"></span><br><span class="line">Transferlog “logs/c.con-access_log”</span><br><span class="line"></span><br><span class="line">&lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure>
<p><img src="2-33.png" alt="2"></p>
<p><strong>重启httpd服务</strong></p>
<p>​    systemctl restart httpd</p>
<p><strong>检查端口是否监听状态</strong></p>
<p>​    ss -ntl</p>
<p><img src="3-31.png" alt="3"></p>
<p>浏<strong>览器分别打开IP:port测试网页能否正常显示</strong></p>
<p><img src="4-25.png" alt="4"></p>
<h3 id="2-实验：基于IP地址的虚拟主机"><a href="#2-实验：基于IP地址的虚拟主机" class="headerlink" title="2. 实验：基于IP地址的虚拟主机"></a><strong>2. 实验：基于IP地址的虚拟主机</strong></h3><p><strong>实验预期</strong>：</p>
<p>搭建三个网站，网站与IP地址对应关系如下：</p>
<p><a href="http://www.a.com" target="_blank" rel="noopener">www.a.com</a>          192.168.30.11</p>
<p><a href="http://www.b.com" target="_blank" rel="noopener">www.b.com</a>          192.168.30.22</p>
<p><a href="http://www.c.com" target="_blank" rel="noopener">www.c.com</a>          192.168.30.33</p>
<p><strong>添加IP地址</strong></p>
<p>ip addr add 192.168.30.11/24 dev ens33</p>
<p>ip addr add 192.168.30.22/24 dev ens33</p>
<p>ip addr add 192.168.30.33/24 dev ens33</p>
<p><img src="1-32.png" alt="1"></p>
<p><strong>修改配置文件</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/httpd/conf.d/test.conf</span><br><span class="line"></span><br><span class="line">&lt;directory “/data/”&gt;</span><br><span class="line"></span><br><span class="line">require all granted</span><br><span class="line"></span><br><span class="line">&lt;/directory&gt;</span><br><span class="line"></span><br><span class="line">&lt;VirtualHost 192.168.30.11:80&gt;</span><br><span class="line"></span><br><span class="line">DocumentRoot “/data/website1”</span><br><span class="line"></span><br><span class="line">ServerName www.a.com</span><br><span class="line"></span><br><span class="line">Errorlog “logs/a.com.error_log”</span><br><span class="line"></span><br><span class="line">Transferlog “logs/a.con-access_log”</span><br><span class="line"></span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line"></span><br><span class="line">&lt;VirtualHost 192.168.30.22:80&gt;</span><br><span class="line"></span><br><span class="line">DocumentRoot “/data/website2”</span><br><span class="line"></span><br><span class="line">ServerName www.b.com</span><br><span class="line"></span><br><span class="line">Errorlog “logs/b.com.error_log”</span><br><span class="line"></span><br><span class="line">Transferlog “logs/b.con-access_log”</span><br><span class="line"></span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line"></span><br><span class="line">&lt;VirtualHost 192.168.30.33:80&gt;</span><br><span class="line"></span><br><span class="line">DocumentRoot “/data/website3”</span><br><span class="line"></span><br><span class="line">ServerName www.c.com</span><br><span class="line"></span><br><span class="line">Errorlog “logs/c.com.error_log”</span><br><span class="line"></span><br><span class="line">Transferlog “logs/c.con-access_log”</span><br><span class="line"></span><br><span class="line">&lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure>
<p><img src="2-34.png" alt="2"></p>
<p>重启httpd服务</p>
<p>systemctl restart httpd</p>
<p>打开浏览器分别测试</p>
<p><img src="3-32.png" alt="3"></p>
<h3 id="3实验：基于主机头的虚拟主机"><a href="#3实验：基于主机头的虚拟主机" class="headerlink" title="3实验：基于主机头的虚拟主机"></a><strong>3实验：基于主机头的虚拟主机</strong></h3><p><strong>实验预期：</strong></p>
<p>通过主机头可直接访问到网站页面，也是实际应用中最常见的虚拟主机搭建方式</p>
<p><strong>具体步骤：</strong></p>
<p><strong>修改配置文件</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/httpd/conf.d/test.conf</span><br><span class="line"></span><br><span class="line">&lt;directory “/data/”&gt;</span><br><span class="line"></span><br><span class="line">require all granted</span><br><span class="line"></span><br><span class="line">&lt;/directory&gt;</span><br><span class="line"></span><br><span class="line">&lt;VirtualHost *:80&gt;</span><br><span class="line"></span><br><span class="line">DocumentRoot “/data/website1”</span><br><span class="line"></span><br><span class="line">ServerName www.a.com</span><br><span class="line"></span><br><span class="line">Errorlog “logs/a.com.error_log”</span><br><span class="line"></span><br><span class="line">Transferlog “logs/a.con-access_log”</span><br><span class="line"></span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line"></span><br><span class="line">&lt;VirtualHost *:80&gt;</span><br><span class="line"></span><br><span class="line">DocumentRoot “/data/website2”</span><br><span class="line"></span><br><span class="line">ServerName www.b.com</span><br><span class="line"></span><br><span class="line">Errorlog “logs/b.com.error_log”</span><br><span class="line"></span><br><span class="line">Transferlog “logs/b.con-access_log”</span><br><span class="line"></span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line"></span><br><span class="line">&lt;VirtualHost *:80&gt;</span><br><span class="line"></span><br><span class="line">DocumentRoot “/data/website3”</span><br><span class="line"></span><br><span class="line">ServerName www.c.com</span><br><span class="line"></span><br><span class="line">Errorlog “logs/c.com.error_log”</span><br><span class="line"></span><br><span class="line">Transferlog “logs/c.con-access_log”</span><br><span class="line"></span><br><span class="line">&lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure>
<p><img src="1-33.png" alt="1"></p>
<p>配置DNS解析，为了方便模拟，我们就在/etc/hosts文件中配置解析</p>
<p><img src="2-35.png" alt="2"></p>
<p>重启httpd服务</p>
<p>systemctl restart httpd</p>
<p>打开浏览器分别访问<a href="http://www.a.com,www.b.com,www.c.com，访问成功" target="_blank" rel="noopener">www.a.com,www.b.com,www.c.com，访问成功</a></p>
<p><img src="3-33.png" alt="3"></p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Apache/" rel="tag"># Apache</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/06/19/HTTP协议介绍/" rel="next" title="HTTP协议介绍">
                <i class="fa fa-chevron-left"></i> HTTP协议介绍
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/06/22/https网络安全协议/" rel="prev" title="https网络安全协议">
                https网络安全协议 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">吕培新</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">71</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">10</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">41</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#一、Apache介绍"><span class="nav-number">1.</span> <span class="nav-text">一、Apache介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#发展历史："><span class="nav-number">1.1.</span> <span class="nav-text">发展历史：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#特性："><span class="nav-number">1.2.</span> <span class="nav-text">特性：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#功能特性："><span class="nav-number">1.3.</span> <span class="nav-text">功能特性：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Httpd安装及主要文件"><span class="nav-number">1.4.</span> <span class="nav-text">Httpd安装及主要文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CentOS-6程序环境：httpd-2-2"><span class="nav-number">1.5.</span> <span class="nav-text">CentOS 6程序环境：httpd-2.2</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#httpd-2-4"><span class="nav-number">1.6.</span> <span class="nav-text">httpd-2.4</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CentOS-7程序环境："><span class="nav-number">1.7.</span> <span class="nav-text">CentOS 7程序环境：</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#二、httpd-2-2常用设置"><span class="nav-number">2.</span> <span class="nav-text">二、httpd-2.2常用设置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-服务器版本信息显示格式"><span class="nav-number">2.1.</span> <span class="nav-text">1. 服务器版本信息显示格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-修改监听的IP和Port"><span class="nav-number">2.2.</span> <span class="nav-text">2. 修改监听的IP和Port</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-持久连接"><span class="nav-number">2.3.</span> <span class="nav-text">3.持久连接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-MPM-多路处理模块"><span class="nav-number">2.4.</span> <span class="nav-text">4. MPM 多路处理模块</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#prefork："><span class="nav-number">2.4.1.</span> <span class="nav-text">prefork：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#worker："><span class="nav-number">2.4.2.</span> <span class="nav-text">worker：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#event："><span class="nav-number">2.4.3.</span> <span class="nav-text">event：</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-DSO-动态共享对象"><span class="nav-number">2.5.</span> <span class="nav-text">5. DSO 动态共享对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-更改httpd服务默认目录"><span class="nav-number">2.6.</span> <span class="nav-text">6. 更改httpd服务默认目录</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-定义站点未指定时的默认页面"><span class="nav-number">2.7.</span> <span class="nav-text">7. 定义站点未指定时的默认页面</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-基于IP的访问控制"><span class="nav-number">2.8.</span> <span class="nav-text">8. 基于IP的访问控制:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-针对资源进行访问控制"><span class="nav-number">2.9.</span> <span class="nav-text">9. 针对资源进行访问控制</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#文件系统路径："><span class="nav-number">2.9.1.</span> <span class="nav-text">文件系统路径：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#URL路径："><span class="nav-number">2.9.2.</span> <span class="nav-text">URL路径：</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-中“基于源地址”实现访问控制"><span class="nav-number">2.10.</span> <span class="nav-text">10 . 中“基于源地址”实现访问控制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11-日志设定"><span class="nav-number">2.11.</span> <span class="nav-text">11.日志设定</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#12-设定默认字符集"><span class="nav-number">2.12.</span> <span class="nav-text">12. 设定默认字符集</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13定义路径别名"><span class="nav-number">2.13.</span> <span class="nav-text">13定义路径别名</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#14-基于用户的访问控制"><span class="nav-number">2.14.</span> <span class="nav-text">14. 基于用户的访问控制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#15-实现用户家目录的http共享"><span class="nav-number">2.15.</span> <span class="nav-text">15. 实现用户家目录的http共享</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#16-status页面"><span class="nav-number">2.16.</span> <span class="nav-text">16. status页面</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#三、httpd-2-4常用配置"><span class="nav-number">3.</span> <span class="nav-text">三、httpd-2.4常用配置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-切换使用的MPM"><span class="nav-number">3.1.</span> <span class="nav-text">1.切换使用的MPM</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-主目录："><span class="nav-number">3.2.</span> <span class="nav-text">2.主目录：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-基于IP的访问控制"><span class="nav-number">3.3.</span> <span class="nav-text">3.基于IP的访问控制:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-虚拟主机"><span class="nav-number">3.4.</span> <span class="nav-text">4. 虚拟主机</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-ssl-安装mod-ssl，和httpd-2-2相同配置"><span class="nav-number">3.5.</span> <span class="nav-text">5. ssl:安装mod_ssl，和httpd-2.2相同配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-KeepAlive-on"><span class="nav-number">3.6.</span> <span class="nav-text">6. KeepAlive on</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#四、mod-deflate模块——压缩页面优化传输"><span class="nav-number">4.</span> <span class="nav-text">四、mod_deflate模块——压缩页面优化传输</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#五、centos6-9编译安装httpd2-4-29"><span class="nav-number">5.</span> <span class="nav-text">五、centos6.9编译安装httpd2.4.29</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#六、实现虚拟主机——单台主机搭建多个网站"><span class="nav-number">6.</span> <span class="nav-text">六、实现虚拟主机——单台主机搭建多个网站</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#前期准备："><span class="nav-number">6.1.</span> <span class="nav-text">前期准备：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1实验：基于端口号的虚拟主机"><span class="nav-number">6.2.</span> <span class="nav-text">1实验：基于端口号的虚拟主机</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-实验：基于IP地址的虚拟主机"><span class="nav-number">6.3.</span> <span class="nav-text">2. 实验：基于IP地址的虚拟主机</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3实验：基于主机头的虚拟主机"><span class="nav-number">6.4.</span> <span class="nav-text">3实验：基于主机头的虚拟主机</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">吕培新</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
